'use client';
import React, { useEffect, useState } from 'react';

const TopButton = () => {
  const [visible, setVisible] = useState(false);

  const toggleVisibility = () => {
    setVisible(window.scrollY > 100);
  };

  const scrollToTop = () => {
    const scrollTo = (target, duration) => {
      const start = window.scrollY; 
      const change = target - start; 
      const increment = 20; 
      let currentTime = 0;

      const animateScroll = () => {
        currentTime += increment; 
        const val = easeInOutQuad(currentTime, start, change, duration);
        window.scrollTo(0, val); 
        if (currentTime < duration) {
          requestAnimationFrame(animateScroll); 
        }
      };

      const easeInOutQuad = (t, b, c, d) => {
        t /= d / 2; 
        if (t < 1) return (c / 2) * t * t + b; 
        t--; 
        return (-c / 2) * (t * (t - 2) - 1) + b; 
      };

      animateScroll(); 
    };

    scrollTo(0, 600); 
  };

  useEffect(() => {
    
    window.addEventListener('scroll', toggleVisibility);
    return () => {
      
      window.removeEventListener('scroll', toggleVisibility);
    };
  }, []);

  return (
    <button
    id="back-to-top"
      onClick={scrollToTop}
       style={{
        display: visible ? 'block' : 'none', 
       }}
      aria-label="Back to top" 
    >
     <svg
          width="19"
          height="12"
          viewBox="0 0 19 12"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          style={{ transform: "rotate(-90deg);" }}
        >
          <path
            d="M18.5303 6.94049C18.8232 6.64759 18.8232 6.17272 18.5303 5.87983L13.7574 1.10686C13.4645 0.813962 12.9896 0.813962 12.6967 1.10686C12.4038 1.39975 12.4038 1.87462 12.6967 2.16752L16.9393 6.41016L12.6967 10.6528C12.4038 10.9457 12.4038 11.4206 12.6967 11.7135C12.9896 12.0064 13.4645 12.0064 13.7574 11.7135L18.5303 6.94049ZM0.9 7.16016C1.31421 7.16016 1.65 6.82437 1.65 6.41016C1.65 5.99594 1.31421 5.66016 0.9 5.66016V7.16016ZM2.7 5.66016C2.28579 5.66016 1.95 5.99594 1.95 6.41016C1.95 6.82437 2.28579 7.16016 2.7 7.16016V5.66016ZM4.5 7.16016C4.91421 7.16016 5.25 6.82437 5.25 6.41016C5.25 5.99594 4.91421 5.66016 4.5 5.66016V7.16016ZM6.3 5.66016C5.88579 5.66016 5.55 5.99594 5.55 6.41016C5.55 6.82437 5.88579 7.16016 6.3 7.16016V5.66016ZM8.1 7.16016C8.51421 7.16016 8.85 6.82437 8.85 6.41016C8.85 5.99594 8.51421 5.66016 8.1 5.66016V7.16016ZM9.9 5.66016C9.48579 5.66016 9.15 5.99594 9.15 6.41016C9.15 6.82437 9.48579 7.16016 9.9 7.16016V5.66016ZM11.7 7.16016C12.1142 7.16016 12.45 6.82437 12.45 6.41016C12.45 5.99594 12.1142 5.66016 11.7 5.66016V7.16016ZM13.5 5.66016C13.0858 5.66016 12.75 5.99594 12.75 6.41016C12.75 6.82437 13.0858 7.16016 13.5 7.16016V5.66016ZM15.3 7.16016C15.7142 7.16016 16.05 6.82437 16.05 6.41016C16.05 5.99594 15.7142 5.66016 15.3 5.66016V7.16016ZM17.1 5.66016C16.6858 5.66016 16.35 5.99594 16.35 6.41016C16.35 6.82437 16.6858 7.16016 17.1 7.16016V5.66016ZM0 7.16016H0.9V5.66016H0V7.16016ZM2.7 7.16016H4.5V5.66016H2.7V7.16016ZM6.3 7.16016H8.1V5.66016H6.3V7.16016ZM9.9 7.16016H11.7V5.66016H9.9V7.16016ZM13.5 7.16016H15.3V5.66016H13.5V7.16016ZM17.1 7.16016H18V5.66016H17.1V7.16016ZM18.5303 6.94049C18.8232 6.64759 18.8232 6.17272 18.5303 5.87983L13.7574 1.10686C13.4645 0.813962 12.9896 0.813962 12.6967 1.10686C12.4038 1.39975 12.4038 1.87462 12.6967 2.16752L16.9393 6.41016L12.6967 10.6528C12.4038 10.9457 12.4038 11.4206 12.6967 11.7135C12.9896 12.0064 13.4645 12.0064 13.7574 11.7135L18.5303 6.94049ZM0.9 7.16016C1.31421 7.16016 1.65 6.82437 1.65 6.41016C1.65 5.99594 1.31421 5.66016 0.9 5.66016V7.16016ZM2.7 5.66016C2.28579 5.66016 1.95 5.99594 1.95 6.41016C1.95 6.82437 2.28579 7.16016 2.7 7.16016V5.66016ZM4.5 7.16016C4.91421 7.16016 5.25 6.82437 5.25 6.41016C5.25 5.99594 4.91421 5.66016 4.5 5.66016V7.16016ZM6.3 5.66016C5.88579 5.66016 5.55 5.99594 5.55 6.41016C5.55 6.82437 5.88579 7.16016 6.3 7.16016V5.66016ZM8.1 7.16016C8.51421 7.16016 8.85 6.82437 8.85 6.41016C8.85 5.99594 8.51421 5.66016 8.1 5.66016V7.16016ZM9.9 5.66016C9.48579 5.66016 9.15 5.99594 9.15 6.41016C9.15 6.82437 9.48579 7.16016 9.9 7.16016V5.66016ZM11.7 7.16016C12.1142 7.16016 12.45 6.82437 12.45 6.41016C12.45 5.99594 12.1142 5.66016 11.7 5.66016V7.16016ZM13.5 5.66016C13.0858 5.66016 12.75 5.99594 12.75 6.41016C12.75 6.82437 13.0858 7.16016 13.5 7.16016V5.66016ZM15.3 7.16016C15.7142 7.16016 16.05 6.82437 16.05 6.41016C16.05 5.99594 15.7142 5.66016 15.3 5.66016V7.16016ZM17.1 5.66016C16.6858 5.66016 16.35 5.99594 16.35 6.41016C16.35 6.82437 16.6858 7.16016 17.1 7.16016V5.66016ZM0 7.16016H0.9V5.66016H0V7.16016ZM2.7 7.16016H4.5V5.66016H2.7V7.16016ZM6.3 7.16016H8.1V5.66016H6.3V7.16016ZM9.9 7.16016H11.7V5.66016H9.9V7.16016ZM13.5 7.16016H15.3V5.66016H13.5V7.16016ZM17.1 7.16016H18V5.66016H17.1V7.16016Z"
            fill="white"
          ></path>
        </svg>
    </button>
  );
};

export default TopButton;
